  
  <!-- Add this debug section at the top of your form -->
<!-- Add this debug section -->
 
<!--
<div class="bg-yellow-100 p-2 mb-4 rounded text-xs">
  <div class="flex justify-between items-center">
    <div>
      <strong>Debug Info:</strong> 
      showModal: {{showModal}}, 
      isLoading: {{isLoading}},
      submitted: {{submitted}}
    </div>
    <div class="flex space-x-2">
      <button (click)="showDebug = !showDebug" class="text-xs bg-blue-500 text-white px-2 py-1 rounded">
        {{showDebug ? 'Hide' : 'Show'}} Details
      </button>
      <button (click)="openModalManually()" class="text-xs bg-green-500 text-white px-2 py-1 rounded">
        Open Modal Manually
      </button>
    </div>
  </div>
  
  <div *ngIf="showDebug" class="mt-2">
    <div>otpVerified: {{otpVerified}}</div>
    <div>errorMessage: {{errorMessage}}</div>
    <div>Form Valid: {{registerForm.valid}}</div>
  </div>
</div>
 -->

<!-- Rest of your form remains the same -->

<!-- Add these test buttons -->
<div class="flex space-x-2 mb-4">
</div>
  <div class="min-h-screen flex items-center justify-center bg-gray-100 py-8">
    <div class="bg-white shadow-xl rounded-xl overflow-hidden max-w-6xl w-full flex flex-col md:flex-row animate__animated animate__fadeInUp">

      <!-- Image Section -->
      <div class="w-full md:w-1/2 h-96 md:h-auto flex items-center justify-center bg-gray-200">
        <img src="assets/images/logo/register.png" alt="Register" class="object-contain w-4/5 h-4/5" />
      </div>

      <!-- Form Section -->
      <div class="w-full md:w-1/2 p-8 md:p-10">
        <h2 class="text-3xl font-bold text-green-700 mb-6 text-center">Create an Account</h2>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="mb-4 p-3 bg-red-100 text-red-700 rounded-md">
          {{ errorMessage }}
        </div>

        <form [formGroup]="registerForm" class="space-y-4">
          <!-- Names -->
          <div class="flex flex-col md:flex-row gap-4">
            <div class="w-full">
              <input type="text" placeholder="First Name" formControlName="firstName" 
                    class="w-full border border-gray-300 rounded-md px-4 py-2" 
                    [class.border-red-500]="submitted && registerForm.get('firstName')?.errors" />
              <div *ngIf="submitted && registerForm.get('firstName')?.errors" class="text-red-500 text-sm mt-1">
                <div *ngIf="registerForm.get('firstName')?.errors?.['required']">First name is required</div>
                <div *ngIf="registerForm.get('firstName')?.errors?.['pattern']">Only letters are allowed</div>
              </div>
            </div>
            <div class="w-full">
              <input type="text" placeholder="Last Name" formControlName="lastName" 
                    class="w-full border border-gray-300 rounded-md px-4 py-2" 
                    [class.border-red-500]="submitted && registerForm.get('lastName')?.errors" />
              <div *ngIf="submitted && registerForm.get('lastName')?.errors" class="text-red-500 text-sm mt-1">
                <div *ngIf="registerForm.get('lastName')?.errors?.['required']">Last name is required</div>
                <div *ngIf="registerForm.get('lastName')?.errors?.['pattern']">Only letters are allowed</div>
              </div>
            </div>
          </div>

          <!-- Email -->
          <div>
            <input type="email" placeholder="Email" formControlName="email" 
                  class="w-full border border-gray-300 rounded-md px-4 py-2" 
                  [class.border-red-500]="submitted && registerForm.get('email')?.errors" />
            <div *ngIf="submitted && registerForm.get('email')?.errors" class="text-red-500 text-sm mt-1">
              <div *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</div>
              <div *ngIf="registerForm.get('email')?.errors?.['email']">Please enter a valid email</div>
            </div>
          </div>

          <!-- Phone -->
          <div>
            <input type="tel" placeholder="Phone Number" formControlName="phone" 
                  class="w-full border border-gray-300 rounded-md px-4 py-2" 
                  [class.border-red-500]="submitted && registerForm.get('phone')?.errors" />
            <div *ngIf="submitted && registerForm.get('phone')?.errors" class="text-red-500 text-sm mt-1">
              <div *ngIf="registerForm.get('phone')?.errors?.['required']">Phone number is required</div>
              <div *ngIf="registerForm.get('phone')?.errors?.['pattern']">Please enter a valid Indian phone number</div>
            </div>
          </div>

          <!-- Passwords -->
          <div>
            <input type="password" placeholder="Password" formControlName="password" 
                  class="w-full border border-gray-300 rounded-md px-4 py-2" 
                  [class.border-red-500]="submitted && registerForm.get('password')?.errors" />
            <div *ngIf="submitted && registerForm.get('password')?.errors" class="text-red-500 text-sm mt-1">
              <div *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</div>
              <div *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 8 characters</div>
              <div *ngIf="registerForm.get('password')?.errors?.['pattern']">
                Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character
              </div>
            </div>
          </div>

          <div>
            <input type="password" placeholder="Re-enter Password" formControlName="confirmPassword" 
                  class="w-full border border-gray-300 rounded-md px-4 py-2" 
                  [class.border-red-500]="submitted && (registerForm.get('confirmPassword')?.errors || registerForm.errors?.['mismatch'])" />
            <div *ngIf="submitted && (registerForm.get('confirmPassword')?.errors || registerForm.errors?.['mismatch'])" class="text-red-500 text-sm mt-1">
              <div *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</div>
              <div *ngIf="registerForm.errors?.['mismatch']">Passwords do not match</div>
            </div>
          </div>

          <!-- Profile Image -->
          <div>
            <label class="text-sm text-gray-600 mb-1 font-medium">Profile Image</label>
            <input type="file" accept="image/png, image/jpeg" (change)="onFileSelected($event)" 
                  class="w-full border border-gray-300 rounded-md p-2" 
                  [class.border-red-500]="submitted && registerForm.get('profileImage')?.errors" />
            <div *ngIf="submitted && registerForm.get('profileImage')?.errors" class="text-red-500 text-sm mt-1">
              <div *ngIf="registerForm.get('profileImage')?.errors?.['required']">Profile image is required</div>
            </div>
          </div>

          <!-- Register Button -->
          <button type="button"
                  (click)="openOTPModal()"
                  [disabled]="isLoading"
                  class="w-full bg-green-600 text-white py-2 rounded-md font-semibold hover:bg-green-700 transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed">
            <span *ngIf="!isLoading">Register</span>
            <span *ngIf="isLoading">Processing...</span>
          </button>
        </form>

        <!-- Divider -->
        <div class="flex items-center justify-center gap-2 mt-4">
          <div class="border-t w-full"></div>
          <span class="text-gray-500 text-sm">or</span>
          <div class="border-t w-full"></div>
        </div>

        <!-- Google Register -->
        <button type="button"
                class="w-full border border-gray-300 text-gray-700 py-2 rounded-md flex items-center justify-center gap-3 hover:bg-gray-100 mt-4">
          <img src="https://www.svgrepo.com/show/355037/google.svg" alt="Google" class="w-5 h-5" />
          Register with Google
        </button>
      </div>
    </div>
  </div>

<!-- OTP Modal -->
<div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="relative bg-white rounded-lg p-8 w-96 shadow-lg animate__animated animate__zoomIn">
    <button (click)="closeOTPModal()" class="absolute top-2 right-2 text-gray-500 hover:text-red-600 text-xl font-bold">&times;</button>
    <h3 class="text-2xl font-bold text-green-700 mb-4 text-center">Verification</h3>
    <p class="text-gray-600 text-center mb-4">Enter the 6-digit OTP sent to your phone.</p>

    <!-- OTP Input -->
    <input type="text" maxlength="6" [(ngModel)]="otp" 
           class="w-full text-center border border-gray-300 rounded-md py-2 text-lg" 
           placeholder="Enter 6-digit OTP" />

    <!-- Error Message in Modal -->
    <div *ngIf="errorMessage" class="mt-3 p-2 bg-red-100 text-red-700 rounded-md text-sm">
      {{ errorMessage }}
    </div>

    <!-- Verify Button -->
    <button (click)="verifyOTP()" 
            [disabled]="isLoading"
            class="mt-6 w-full bg-green-600 text-white py-2 rounded-md font-semibold hover:bg-green-700 transition disabled:bg-gray-400 disabled:cursor-not-allowed">
      <span *ngIf="!isLoading">Verify</span>
      <span *ngIf="isLoading">Verifying...</span>
    </button>
  </div>
</div>
