<div class="text-center mb-10 mt-10">
  <h1 class="text-4xl font-bold text-green-800 mb-2">Enter Your Address</h1>
  <p class="text-gray-600 text-lg">Please provide your delivery details or select from saved addresses.</p>
</div>

<div class="max-w-6xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-lg animate__animated animate__fadeIn mb-10">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">

    <!-- Left Image -->
    <div class="animate__animated animate__fadeInLeft flex justify-center">
      <img src="assets/images/addresslogo.png" alt="Delivery Address" class="w-full max-w-sm h-auto object-contain">
    </div>

    <!-- Right Address Forms -->
    <div class="space-y-6 animate__animated animate__fadeInRight">

      <!-- ✅ Select Saved Address -->
      <form class="space-y-4">
        <div>
          <label class="block text-gray-700 font-medium mb-2 text-lg">Select From Saved Addresses</label>
          <select [(ngModel)]="selectedAddressId" name="selectedAddressId"
                  class="w-full px-4 py-2 border border-gray-300 rounded-md">
            <option value="">-- Choose saved address --</option>
            <option *ngFor="let addr of addresses" [value]="addr.id">
              {{ addr.first_name }} {{ addr.last_name }}, {{ addr.street }}, {{ addr.pincode }}
            </option>
          </select>
        </div>

        <div>
          <button type="button"
                  class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded-md transition duration-300"
                  (click)="continueWithSaved()">
            Continue with Selected Address
          </button>
        </div>
      </form>

      <!-- OR Divider -->
      <div class="flex items-center">
        <div class="flex-grow border-t border-gray-300"></div>
        <span class="mx-4 text-gray-500 font-medium">OR</span>
        <div class="flex-grow border-t border-gray-300"></div>
      </div>

      <!-- ✅ New Address Form -->
      <form class="grid grid-cols-1 md:grid-cols-2 gap-4" (ngSubmit)="saveNewAddress()">
        <div>
          <label class="block text-gray-700 font-medium mb-1">First Name</label>
          <input type="text" [(ngModel)]="newAddress.first_name" name="first_name"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="Aman" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Last Name</label>
          <input type="text" [(ngModel)]="newAddress.last_name" name="last_name"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="Patel" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Mobile Number</label>
          <input type="text" [(ngModel)]="newAddress.number" name="number"
                 pattern="[6-9]\\d{9}" title="Enter a valid 10-digit Indian mobile number"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="9876543210" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Email</label>
          <input type="email" [(ngModel)]="newAddress.email" name="email"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="example@gmail.com" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">City</label>
          <select [(ngModel)]="selectedCity" name="city"
                  (change)="onCityChange($event)"
                  class="w-full px-4 py-2 border border-gray-300 rounded-md" required>
            <option value="">-- Select City --</option>
            <option *ngFor="let c of cities" [value]="c">{{ c }}</option>
          </select>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Area</label>
          <select [(ngModel)]="newAddress.area" name="area"
                  class="w-full px-4 py-2 border border-gray-300 rounded-md" required>
            <option value="">-- Select Area --</option>
            <option *ngFor="let a of areas" [value]="a">{{ a }}</option>
          </select>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Street/Society</label>
          <input type="text" [(ngModel)]="newAddress.street" name="street"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="Main Street / Om Society" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">House Number</label>
          <input type="text" [(ngModel)]="newAddress.house_number" name="house_number"
                 class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="123/A" required>
        </div>

        <div>
          <label class="block text-gray-700 font-medium mb-1">Pincode</label>
          <input type="text" [(ngModel)]="newAddress.pincode" name="pincode"
                 pattern="\\d{6}" class="w-full px-4 py-2 border border-gray-300 rounded-md" placeholder="560001" required>
        </div>

        <div class="md:col-span-2">
          <button type="submit"
                  class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-md transition duration-300 w-full">
            Save Address
          </button>
        </div>
      </form>

    </div>
  </div>
</div>
